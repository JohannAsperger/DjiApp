<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Resumen de Vuelos</title>

  <!-- ‚úÖ TailwindCSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
        },
      },
    };
  </script>

  <!-- ‚úÖ Cesium -->
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Widgets/widgets.css" rel="stylesheet" />
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.113/Build/Cesium/Cesium.js"></script>

  <!-- ‚úÖ JustGage + Raphael -->
  <script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/justgage@1.3.5/justgage.min.js"></script>

  <style>
    #cesiumContainer {
      width: 100%;
      height: 500px;
      display: none;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans text-gray-800">
  <!-- Resumen general -->
  <div id="resumen" class="max-w-4xl mx-auto py-10 px-6">
    <h1 class="text-3xl font-bold mb-6 text-center">Resumen de Vuelos</h1>

    <div class="bg-white shadow rounded-lg p-6 mb-8">
      <ul class="grid grid-cols-1 sm:grid-cols-2 gap-y-4 gap-x-8">
        <li><strong>Cantidad total de vuelos:</strong> {{ resumen_general.cantidad_vuelos }}</li>
        <li><strong>Duraci√≥n total de vuelo:</strong> {{ resumen_general.duracion_total_min }} minutos</li>
        <li><strong>Distancia recorrida total:</strong> {{ resumen_general.distancia_total_km }} km</li>
        <li><strong>Distancia m√°xima desde el origen:</strong> {{ resumen_general.distancia_maxima_km }} km</li>
        <li><strong>Altitud m√°xima alcanzada:</strong> {{ resumen_general.altitud_maxima_metros }} metros</li>
        <li><strong>Temperatura m√°xima de bater√≠a:</strong> {{ resumen_general.temperatura_maxima_bateria_c }} ¬∞C</li>
        <li><strong>Velocidad m√°xima alcanzada:</strong> {{ resumen_general.velocidad_maxima_kmh }} km/h</li>
      </ul>
    </div>

    <h2 class="text-2xl font-semibold mb-4">Vuelos</h2>
    <div class="bg-white shadow rounded-lg p-4 max-h-96 overflow-y-auto border border-gray-200">
      <ul id="lista-vuelos" class="space-y-2">
        {% for vuelo in vuelos %}
          <li>
            <a href="#" class="enlace-vuelo text-blue-600 hover:underline" data-vuelo="{{ vuelo.id }}">
              {{ vuelo.fecha_mostrar }} ‚Äî {{ (vuelo.duracion_segundos / 60) | round(1) }} min
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- Detalle de vuelo -->
  <div id="detalle-vuelo" class="max-w-5xl mx-auto px-6 py-10" style="display: none;">
    <button onclick="window.volverAlResumen()" class="mb-4 text-blue-600 hover:underline">‚Üê Volver al resumen</button>

    <div id="cesiumContainer" class="rounded-lg overflow-hidden mb-6"></div>

    <!-- Instrumentos -->
    <div class="flex justify-center gap-10 mb-8">
      <div>
        <h4 class="text-center text-sm font-medium mb-1">Velocidad (km/h)</h4>
        <div id="gauge-velocidad" class="w-[150px] h-[120px]"></div>
      </div>
      <div>
        <h4 class="text-center text-sm font-medium mb-1">Altitud (m)</h4>
        <div id="gauge-altitud" class="w-[150px] h-[120px]"></div>
      </div>
    </div>

    <div id="info-vuelo" class="bg-white shadow-lg rounded-xl p-6 border border-gray-200">
      <h3 class="text-2xl font-semibold text-gray-800 mb-6">Detalles del vuelo</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-y-4 gap-x-12 text-gray-700">
        <div><span class="font-medium text-gray-900">Duraci√≥n:</span> <span id="duracion"></span> minutos</div>
        <div><span class="font-medium text-gray-900">Bater√≠a al inicio:</span> <span id="bateria-inicio"></span>%</div>
        <div><span class="font-medium text-gray-900">Bater√≠a al final:</span> <span id="bateria-fin"></span>%</div>
        <div><span class="font-medium text-gray-900">Altitud m√°xima:</span> <span id="altitud-maxima"></span> m</div>
        <div><span class="font-medium text-gray-900">Distancia m√°xima desde origen:</span> <span id="distancia-maxima"></span> km</div>
        <div><span class="font-medium text-gray-900">Distancia total recorrida:</span> <span id="distancia-total"></span> km</div>
        <div><span class="font-medium text-gray-900">Temperatura m√°xima bater√≠a:</span> <span id="temperatura-maxima"></span> ¬∞C</div>
        <div><span class="font-medium text-gray-900">Velocidad m√°xima alcanzada:</span> <span id="velocidad-maxima"></span> km/h</div>
      </div>
    </div>
  </div>

  <!-- JS principal -->
  <script src="/static/js/app.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelectorAll(".enlace-vuelo").forEach((el) => {
        el.addEventListener("click", (event) => {
          event.preventDefault();
          const vueloId = el.dataset.vuelo;
          if (vueloId && typeof window.cargarVuelo === "function") {
            console.log("üü¢ Abriendo vuelo:", vueloId);
            window.cargarVuelo(vueloId);
          } else {
            console.warn("‚ö†Ô∏è No se pudo cargar vuelo", vueloId);
          }
        });
      });
    });
  </script>
</body>
</html>









































